<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skyla - Documentation</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: #f5f4f0;
      color: #1a1a1a;
      line-height: 1.6;
    }
    
    .layout {
      display: flex;
      min-height: calc(100vh - 80px);
    }
    
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid #e5e5e5;
      padding: 32px 24px;
      position: sticky;
      top: 0;
      height: calc(100vh - 80px);
      overflow-y: auto;
    }
    
    .sidebar h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #1a1a1a;
    }
    
    .sidebar ul {
      list-style: none;
    }
    
    .sidebar li {
      margin-bottom: 8px;
    }
    
    .sidebar a {
      color: #666;
      text-decoration: none;
      font-size: 14px;
      padding: 6px 0;
      display: block;
      transition: color 0.2s ease;
    }
    
    .sidebar a:hover,
    .sidebar a.active {
      color: #1a1a1a;
      font-weight: 500;
    }
    
    .content {
      flex: 1;
      padding: 40px 48px;
      max-width: 800px;
    }
    
    .content h1 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 32px;
      color: #1a1a1a;
    }
    
    .content h2 {
      font-size: 24px;
      font-weight: 600;
      margin: 40px 0 16px 0;
      color: #1a1a1a;
      border-bottom: 2px solid #e5e5e5;
      padding-bottom: 8px;
    }
    
    .content h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 32px 0 12px 0;
      color: #1a1a1a;
    }
    
    .content p {
      margin-bottom: 16px;
      font-size: 16px;
      color: #333;
    }
    
    .content ul {
      margin: 16px 0 16px 24px;
    }
    
    .content li {
      margin-bottom: 8px;
      font-size: 16px;
      color: #333;
    }
    
    .content strong {
      font-weight: 600;
      color: #1a1a1a;
    }
    
    .docs-image {
      max-width: 100%;
      height: auto;
      margin: 24px 0;
      border-radius: 8px;
      border: 1px solid #e5e5e5;
    }
    
    .image-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 200px;
      background: #f0f0f0;
      border: 2px dashed #ccc;
      border-radius: 8px;
      color: #666;
      font-style: italic;
      margin: 24px 0;
    }
    
    .highlight-box {
      background: #fff;
      border-left: 4px solid #4a9eff;
      padding: 20px;
      margin: 24px 0;
      border-radius: 0 8px 8px 0;
    }
    
    .spec-link {
      background: #fff;
      border: 1px solid #e5e5e5;
      border-radius: 8px;
      padding: 16px;
      margin: 24px 0;
      text-align: center;
    }
    
    .spec-link a {
      color: #4a9eff;
      text-decoration: none;
      font-weight: 500;
    }
    
    .spec-link a:hover {
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      .layout {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        position: static;
        border-right: none;
        border-bottom: 1px solid #e5e5e5;
      }
      
      .content {
        padding: 24px;
      }
    }
  </style>
</head>
<body>
  <%- include('partials/header') %>
  
  <div class="layout">
    <nav class="sidebar">
      <h3>Documentation</h3>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#consensus-system">Consensus System</a></li>
        <li><a href="#identity-vector">Identity Vector</a></li>
        <li><a href="#features">Key Features</a></li>
        <li><a href="#api">API</a></li>
        <li><a href="#faq">FAQ</a></li>
      </ul>
    </nav>
    
    <main class="content">
      <h1>Skyla Documentation</h1>
      
      <div class="spec-link">
        <p>Looking for technical implementation details? Check out the <a href="/spec">Technical Specification</a></p>
      </div>
      
      <h2 id="overview">Overview</h2>
      <p>Skyla is an AI platform that implements a context-aware epistemic gate system with 2-model consensus architecture. The platform combines symbolic reasoning, advanced mathematical model selection, and cryptographic verification to create transparent, auditable AI behavior.</p>
      
      <p>Unlike traditional AI systems that use duplicate models, Skyla implements true architectural diversity by comparing Claude Haiku (efficiency-focused) against Claude Sonnet (quality-focused), providing authentic consensus measurement and quality-based selection.</p>
      
      <img class="docs-image" src="/assets/stack.png" alt="Skyla architecture overview" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
      <div class="image-placeholder" style="display: none;">Architecture Overview (Conceptual)</div>
      
      <h2 id="consensus-system">Multi-Model Consensus System</h2>
      <p><strong>Status: Currently Implemented</strong> - This is the core innovation of Skyla's current implementation.</p>
      
      <h3>True Architectural Diversity</h3>
      <p>Unlike systems that use duplicate models, Skyla implements genuine consensus measurement between two different Claude architectures with distinct strengths and optimizations.</p>
      
      <h3>Advanced Selection Algorithm</h3>
      <p>The system evaluates responses using sophisticated metrics including adaptive length scoring, nuance detection, efficiency indicators, semantic richness, and structural coherence.</p>
      
      <h3>Context-Aware Processing</h3>
      <p>The system provides context-aware architectural preferences, giving efficiency-focused models advantages for simple queries and quality-focused models advantages for complex analytical tasks.</p>
      
      <h3>Dynamic Token Allocation</h3>
      <p>Response length is dynamically adjusted based on input complexity, ensuring optimal resource usage while maintaining response quality.</p>
      
      <h3>Integrity Measurement</h3>
      <p>The system measures genuine divergence between architectures across multiple dimensions including length variance, sentiment analysis, topic consistency, and tone evaluation.</p>
      
      <h2 id="identity-vector">Identity Vector System</h2>
      <p>The Identity Vector System defines the mathematical foundation of Skyla's state management. This 4-dimensional vector space enables precise, deterministic state transitions while maintaining cryptographic verifiability.</p>
      
      <h3>Vector Dimensions</h3>
      <ul>
        <li><strong>Cognitive:</strong> Analytical thinking and reasoning capabilities</li>
        <li><strong>Emotional:</strong> Sentiment and affective response patterns</li>
        <li><strong>Adaptive:</strong> Flexibility and learning capability</li>
        <li><strong>Coherence:</strong> Consistency and structural integrity</li>
      </ul>
      
      <h3>State Transition Mechanics</h3>
      <p>The system uses three-layer processing to ensure deterministic, mathematically consistent state changes:</p>
      <ul>
        <li><strong>Symbolic Rules:</strong> Direct pattern matching for specific commands</li>
        <li><strong>Semantic Patterns:</strong> Regex-based categorization with precise mathematical adjustments</li>
        <li><strong>Hash Fallback:</strong> Deterministic micro-adjustments for unknown inputs</li>
      </ul>
      
      <h3>Mode Transitions</h3>
      <p>The system determines operational modes based on the dominant dimension values, transitioning between analytical, creative, adaptive, and coherent modes as needed. All transitions generate cryptographic proofs for verification.</p>
      
      <h2 id="features">Key Features</h2>
      
      <h3>Context-Aware Epistemic Gate</h3>
      <p>Revolutionary context analysis system that prevents unnecessary clarification requests by analyzing conversation history and resolving ambiguous references automatically.</p>
      
      <h3>Session Memory Management</h3>
      <p>Maintains conversational context across interactions with smart context extraction that identifies recent topics, problems, and technologies mentioned in conversations.</p>
      
      <h3>Mathematical Quality Assessment</h3>
      <p>Sophisticated 5-factor quality scoring system that evaluates optimal response length, nuance detection, efficiency indicators, semantic richness, and structural coherence.</p>
      
      <h3>Query Complexity Analysis</h3>
      <p>Automatic categorization of input complexity with dynamic weighting that favors nuance for complex queries and efficiency for simple interactions.</p>
      
      <div class="highlight-box">
        <h3>Current Implementation Status</h3>
        <p><strong>Fully Functional:</strong></p>
        <ul>
          <li>True 2-Model Consensus System with architectural diversity</li>
          <li>Context-Aware Epistemic Gate with conversation analysis</li>
          <li>Mathematical Model Selection with 5-factor quality scoring</li>
          <li>Session Memory System with 10-exchange history</li>
          <li>Identity Vector Management with cryptographic proofs</li>
          <li>Interactive Console Demo with real-time state visualization</li>
        </ul>
        
        <p><strong>In Development:</strong></p>
        <ul>
          <li>Full cryptographic verification with production-grade ZK proofs</li>
          <li>Multi-agent systems / epistemic telemetry coordination</li>
          <li>Advanced API endpoints with authentication</li>
        </ul>
      </div>
      
      <h2 id="api">API Interface</h2>
      
      <h3>Primary Endpoint</h3>
      <p>Skyla provides a working API endpoint for multi-model consensus processing with context-aware epistemic analysis.</p>
      
      <h3>Response Format</h3>
      <p>API responses include the selected model response, integrity measurements, consensus strength, divergence metrics, and contextual analysis. The system provides clear feedback about why specific models were selected and how confident the system is in the response quality.</p>
      
      <h3>Identity Vector Context</h3>
      <p>The server uses the identity vector for contextual awareness only - all vector modifications happen client-side, ensuring the system maintains transparency while providing contextual understanding.</p>
      
      <h2 id="faq">FAQ</h2>
      
      <h3>What's actually implemented vs conceptual?</h3>
      <p><strong>Currently Working:</strong> True 2-model consensus system with Claude Haiku vs Sonnet, advanced quality scoring, architectural selection, context memory, and integrity measurement. <strong>Conceptual:</strong> Full cryptographic verification, multi-agent systems / epistemic telemetry coordination.</p>
      
      <h3>How does the consensus system work?</h3>
      <p>Skyla sends each query to both Claude Haiku and Sonnet simultaneously, measures their response divergence across 4 dimensions, then selects the best response using a 5-factor quality scoring algorithm that considers query complexity and architectural strengths.</p>
      
      <h3>What makes this different from other AI systems?</h3>
      <p>Most AI systems use single models or duplicate models for redundancy. Skyla uses genuinely different architectures (efficiency vs quality focused) and measures real consensus between them, providing transparency into AI decision-making that doesn't exist elsewhere.</p>
      
      <h3>How does the context-aware epistemic gate work?</h3>
      <p>Instead of asking for clarification every time there's any ambiguity, Skyla analyzes conversation history to resolve pronouns and contextual references. It only requests clarification when there's genuine ambiguity that can't be resolved from context.</p>
      
      <h3>Is this ready for production use?</h3>
      <p>The core consensus system, identity vector management, and context analysis are fully functional and ready for use. Full cryptographic verification and multi-agent coordination features are still in development.</p>
      
      <div class="spec-link">
        <p>For detailed technical implementation, API specifications, and code examples, visit the <a href="/spec">Technical Specification</a></p>
      </div>
    </main>
  </div>
</body>
</html>